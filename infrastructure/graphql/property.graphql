






type Property {
  id: ID!
  address: String!
  postcode: String!
  city: String
  propertyType: PropertyType!
  purchasePrice: Float!
  currentValuation: Float!
  status: PropertyStatus!
  images: [String!]
  acquisitionDate: AWSDate!
  totalInvested: Float
  investments: [Investment!]
  developments: [Development!]
  documents: [Document!]
  createdAt: AWSDateTime!
  updatedAt: AWSDateTime!
}

type DashboardProperty {
  id: ID!
  address: String!
  postcode: String!
  city: String
  propertyType: PropertyType!
  currentValuation: Float!
  status: PropertyStatus!
  equityPercentage: Float!
  investmentValue: Float!
  investmentAmount: Float!
}

type Investment {
  id: ID!
  investorId: ID!
  investor: Investor
  propertyId: ID!
  property: Property
  investmentAmount: Float!
  equityPercentage: Float!
  investmentDate: AWSDate!
  currentValue: Float!
  roi: Float!
  status: InvestmentStatus!
  createdAt: AWSDateTime!
  updatedAt: AWSDateTime!
}

type Transaction {
  id: ID!
  investorId: ID!
  investor: Investor
  propertyId: ID
  property: Property
  type: TransactionType!
  amount: Float!
  description: String!
  date: AWSDate!
  reference: String
  createdAt: AWSDateTime!
}

type Document {
  id: ID!
  investorId: ID
  investor: Investor
  propertyId: ID
  property: Property
  title: String!
  description: String
  fileKey: String!
  fileType: String!
  fileSize: Int!
  uploadDate: AWSDateTime!
  category: DocumentCategory!
  url: String
}

type Development {
  id: ID!
  propertyId: ID!
  property: Property
  title: String!
  description: String!
  status: String!
  updateDate: AWSDateTime!
  images: [String!]
  createdAt: AWSDateTime!
}

type Notification {
  id: ID!
  investorId: ID!
  investor: Investor
  title: String!
  message: String!
  type: NotificationType!
  isRead: Boolean!
  createdAt: AWSDateTime!
  link: String
}










type InvestmentConnection {
  items: [Investment!]!
  nextToken: String
}

type TransactionConnection {
  items: [Transaction!]!
  nextToken: String
}

type DocumentConnection {
  items: [Document!]!
  nextToken: String
}

type NotificationConnection {
  items: [Notification!]!
  nextToken: String
}

type DevelopmentConnection {
  items: [Development!]!
  nextToken: String
}





enum PropertyType {
  RESIDENTIAL
  COMMERCIAL
  MIXED_USE
  LAND
}

enum PropertyStatus {
  ACQUISITION
  DEVELOPMENT
  COMPLETED
  SOLD
}

enum InvestmentStatus {
  ACTIVE
  COMPLETED
  PENDING
}

enum TransactionType {
  INVESTMENT
  DIVIDEND
  PROFIT_SHARE
  WITHDRAWAL
  FEE
}

enum DocumentCategory {
  CONTRACT
  REPORT
  CERTIFICATE
  INVOICE
  VALUATION
  KYC_DOCUMENT
  IDENTITY_DOCUMENT
  ADDRESS_PROOF
  SOURCE_OF_FUNDS
  OTHER
}

enum NotificationType {
  INVESTMENT_UPDATE
  DOCUMENT_UPLOADED
  PAYMENT_RECEIVED
  PROPERTY_UPDATE
  KYC_STATUS_CHANGE
  AML_ALERT
  SYSTEM
}





input CreatePropertyInput {
  address: String!
  postcode: String!
  city: String
  propertyType: PropertyType!
  purchasePrice: Float!
  currentValuation: Float!
  status: PropertyStatus!
  images: [String!]
  acquisitionDate: AWSDate!
}

input UpdatePropertyInput {
  id: ID!
  currentValuation: Float
  status: PropertyStatus
  images: [String!]
}

input CreateInvestmentInput {
  investorId: ID!
  propertyId: ID!
  investmentAmount: Float!
  equityPercentage: Float!
}

input CreateTransactionInput {
  investorId: ID!
  propertyId: ID
  type: TransactionType!
  amount: Float!
  description: String!
  date: AWSDate
  reference: String
}

input UploadDocumentInput {
  investorId: ID
  propertyId: ID
  title: String!
  description: String
  fileKey: String!
  fileType: String!
  fileSize: Int!
  category: DocumentCategory!
}

input CreateDevelopmentInput {
  propertyId: ID!
  title: String!
  description: String!
  status: String!
  images: [String!]
}

input SendNotificationInput {
  investorId: ID
  investorIds: [ID!]
  title: String!
  message: String!
  type: NotificationType!
  link: String
}





type Query {
  
  getProperty(id: ID!): Property
  listProperties(limit: Int, nextToken: String): [Property!]!
  listPropertiesByStatus(
    status: PropertyStatus!
    limit: Int
    nextToken: String
  ): [Property!]!

  
  getInvestment(id: ID!): Investment
  listInvestmentsByInvestor(
    investorId: ID!
    limit: Int
    nextToken: String
  ): InvestmentConnection!
  listInvestmentsByProperty(
    propertyId: ID!
    limit: Int
    nextToken: String
  ): InvestmentConnection!

  
  getTransaction(id: ID!): Transaction
  listTransactionsByInvestor(
    investorId: ID!
    limit: Int
    nextToken: String
  ): TransactionConnection!

  
  getDocument(id: ID!): Document
  listDocumentsByInvestor(
    investorId: ID!
    limit: Int
    nextToken: String
  ): DocumentConnection!
  listDocumentsByProperty(
    propertyId: ID!
    limit: Int
    nextToken: String
  ): DocumentConnection!
  generateDocumentUrl(id: ID!): String!

  
  listNotificationsByInvestor(
    investorId: ID!
    limit: Int
    nextToken: String
  ): NotificationConnection!

  
  listDevelopmentsByProperty(
    propertyId: ID!
    limit: Int
    nextToken: String
  ): DevelopmentConnection!
  
  
}





type Mutation {
  
  createProperty(input: CreatePropertyInput!): Property!
  updateProperty(input: UpdatePropertyInput!): Property!

  
  createInvestment(input: CreateInvestmentInput!): Investment!

  
  createTransaction(input: CreateTransactionInput!): Transaction!

  
  uploadDocument(input: UploadDocumentInput!): Document!

  
  createDevelopment(input: CreateDevelopmentInput!): Development!

  
  sendNotification(input: SendNotificationInput!): Notification!
  markNotificationRead(id: ID!): Notification!
}





type Subscription {
  
  onMyInvestmentCreated(investorId: ID!): Investment
    @aws_subscribe(mutations: ["createInvestment"])

  
  onMyNotificationCreated(investorId: ID!): Notification
    @aws_subscribe(mutations: ["sendNotification"])

  
  onDevelopmentCreated(propertyId: ID!): Development
    @aws_subscribe(mutations: ["createDevelopment"])
}





















